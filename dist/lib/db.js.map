{"version":3,"file":"db.js","names":["db","getDB","client","connect","MongoClient","mongoUrl","useNewUrlParser","useUnifiedTopology","keepAlive","err","console","log","process","exit","dbName"],"sources":["../../src/lib/db.js"],"sourcesContent":["import connect from 'mongodb';\nimport { dbName, mongoUrl } from '../config';\n\nlet db = null;\n\n/**\n * Database singleton\n *\n * @returns {Promise<null|Db>}\n */\nexport const getDB = async function () {\n  if (!db) {\n    const client = new connect.MongoClient(mongoUrl, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true,\n      keepAlive: 1,\n    });\n\n    await client.connect()\n      .catch((err) => {\n        console.log(err);\n        process.exit(-1);\n      });\n\n    db = client.db(dbName);\n  }\n\n  return db;\n};\n"],"mappings":"0aAGIA,EAAE,CAAG,IAAI,CAOAC,KAAK,iFAAG,0GACdD,EAAE,uBACCE,EAAM,CAAG,GAAIC,oBAAO,CAACC,WAAW,CAACC,gBAAQ,CAAE,CAC/CC,eAAe,GAAM,CACrBC,kBAAkB,GAAM,CACxBC,SAAS,CAAE,CACb,CAAC,CAAC,UAEIN,CAAM,CAACC,OAAO,EAAE,SACd,CAAC,SAACM,CAAG,CAAK,CACdC,OAAO,CAACC,GAAG,CAACF,CAAG,CAAC,CAChBG,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC,CACjB,CAAC,CAAC,QAEJb,EAAE,CAAGE,CAAM,CAACF,EAAE,CAACc,cAAM,CAAC,iCAGjBd,EAAE,yCACV"}